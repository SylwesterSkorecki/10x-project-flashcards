---
import Layout from "@/layouts/Layout.astro";
import { ForgotPasswordForm } from "@/components/auth/ForgotPasswordForm";

// Get error parameter from URL
const error = Astro.url.searchParams.get("error");

// Map error codes to user-friendly messages
const errorMessages: Record<string, string> = {
  invalid_token: "Link resetujący hasło jest nieprawidłowy. Poproś o nowy link.",
  link_expired: "Link resetujący hasło wygasł. Linki są ważne przez 1 godzinę. Wyślij nowe żądanie.",
};

const errorMessage = error ? errorMessages[error] : null;
---

<Layout title="Resetowanie hasła - SmartFlash">
  <div class="min-h-screen flex items-center justify-center bg-muted/30 py-12 px-4">
    {
      errorMessage && (
        <div class="fixed top-4 right-4 p-4 rounded-md bg-destructive/10 border border-destructive/20 shadow-lg max-w-md">
          <p class="text-sm text-destructive">{errorMessage}</p>
        </div>
      )
    }
    <ForgotPasswordForm client:load />
  </div>
</Layout>

<style>
  .fixed {
    animation: slideIn 0.3s ease-out;
  }

  @keyframes slideIn {
    from {
      opacity: 0;
      transform: translateY(-1rem);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
</style>
